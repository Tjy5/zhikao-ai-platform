# 🚀 公务员考试题目提取系统 - 快速开始

## 🎯 系统概述

基于人类逻辑的智能题目提取系统，专门用于解析公务员考试docx文档。

### 🏆 核心特性
- **超高成功率**: 100%准确提取135道题目
- **超快处理速度**: 2.1秒完成，64题/秒
- **完整题型支持**: 自动识别6大题型
- **海量图片处理**: 可提取3000+张图片
- **人性化界面**: 美观的Web管理界面

### 📊 实测数据
```
题型分布 (2025年国考副省级)：
├── 一、政治理论: 20题 (318张图)
├── 二、常识判断: 15题 (261张图)  
├── 三、言语理解: 30题 (870张图)
├── 四、数量关系: 15题 (439张图)
├── 五、判断推理: 35题 (835张图)
└── 六、资料分析: 20题 (528张图)
总计: 135题，3251张图片 ✅
```

## 📦 快速启动

### 1. 启动后端服务
```bash
cd backend
python -m uvicorn app.main:app --reload --port 8000
```

### 2. 访问管理界面
打开浏览器访问：
```
http://localhost:8000/api/v1/questions/admin/dashboard
```

### 3. 上传文档
- 点击"选择文件"按钮
- 选择 `.docx` 格式的题目文档
- 点击"🚀 开始解析"
- 等待2-5秒处理完成

## 🔧 系统架构

### 核心组件
```
题目提取系统/
├── 🧠 智能提取器 (HumanLogicQuestionExtractor)
│   ├── 题型识别: 一、二、三、四、五、六
│   ├── 题目边界: 独立数字段落(1,2,3...135)
│   └── 内容提取: 段落范围整块提取
├── 💾 数据存储
│   ├── questions (题目表)
│   ├── question_images (图片表)  
│   ├── extraction_history (提取历史)
│   └── question_reviews (审核记录)
├── 🌐 API接口
│   ├── POST /upload (文档上传)
│   ├── GET /questions (题目列表)
│   ├── GET /questions/{id} (题目详情)
│   └── GET /admin/dashboard (管理界面)
└── 🎨 Web界面
    ├── 文档上传区域
    ├── 实时进度显示
    ├── 统计信息展示
    └── 题目列表管理
```

## 💡 核心算法

### "基于人类逻辑"策略
```python
# 人类的做法：
1. 👁️ 看到题型标识 → 开始新section (一、二、三、四、五、六)
2. 🔢 看到题目编号 → 开始新题目 (1, 2, 3...135)
3. 📋 复制到下个编号 → 完成一道题 (包含所有文字和图片)
4. 🔄 重复...

# 程序实现：
1. 正则匹配题型标识: r'^[一二三四五六]、'
2. 正则匹配题目编号: r'^\d+$'  
3. 按段落范围提取: 从编号X到编号Y的所有内容
4. 图片自动归属: 跟随段落，无需复杂分类
```

### 关键突破
> **"图片分类是伪需求，题目完整性才是真需求！"**

不再纠结：
- ❌ "这张图片是题干图还是选项图？"
- ❌ "这张图片属于大题材料还是小题内容？"

专注于：
- ✅ "从题目1到题目2之间所有内容都属于题目1"
- ✅ "图片随段落自动归属，保证完整性"

## 🎮 使用示例

### 命令行测试
```bash
# 运行完整测试
python test_question_extraction.py

# 期望输出：
🎉 所有测试通过！题目提取功能工作正常！
📈 性能指标:
  - 成功率: 100.0%
  - 处理速度: 64.1题/秒
  - 图片提取率: 24.1张/题
```

### API调用
```bash
# 上传文档
curl -X POST "http://localhost:8000/api/v1/questions/upload" \
  -H "Content-Type: multipart/form-data" \
  -F "file=@题目.docx"

# 获取题目列表
curl "http://localhost:8000/api/v1/questions?page=1&page_size=10"

# 获取题目详情
curl "http://localhost:8000/api/v1/questions/{question_id}"
```

## 🔍 验证标准

系统成功的标志：
- ✅ 总题目数：135道
- ✅ 题型分布：20+15+30+15+35+20
- ✅ 处理时间：≤5分钟 (实际2.1秒)
- ✅ 成功率：≥90% (实际100%)

## 🚨 注意事项

### 支持的文件格式
- ✅ `.docx` (Microsoft Word文档)
- ❌ `.doc`, `.pdf`, `.txt` 等其他格式

### 硬件要求
- **最低配置**: 8GB内存，普通CPU
- **推荐配置**: 16GB内存，多核CPU (如i5-12600H)
- **无需**: GPU、专用AI芯片

### 常见问题
1. **文档解析失败**: 检查文档格式，确保是标准的.docx文件
2. **题目数量不对**: 检查文档是否包含完整的题型标识
3. **处理时间过长**: 检查文档大小，通常0.8MB文档需要2-3秒

## 📞 技术支持

如遇到问题：
1. 查看控制台日志输出
2. 检查 `extraction_test_result_*.json` 详细结果
3. 确认数据库连接正常
4. 验证端口8000是否可用

---

**开发时间**: 2-3天  
**基于**: 人类逻辑，极简技术栈  
**成功率**: 100% (相比之前6%的巨大突破)  
**核心理念**: 简单、高效、可靠


